{% extends 'base.html' %} {% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="fw-bold">
    <i class="bi bi-box-seam-fill text-primary"></i> Inventory
  </h2>
  {% if user.role == 'admin' %}
  <div class="d-flex gap-2">
    <a href="{% url 'add_item' %}" class="btn btn-primary btn-sm">
      <i class="bi bi-plus-circle"></i> Add Item
    </a>
    <a href="{% url 'restock_item' %}" class="btn btn-outline-secondary btn-sm">
      <i class="bi bi-arrow-repeat"></i> Restock
    </a>
  </div>
  {% endif %}
</div>

<div class="table-responsive">
  <table class="table table-hover align-middle shadow-sm">
    <thead class="table-light">
      <tr>
        <th>Name</th>
        <th>Qty</th>
        <th>Price</th>
        {% if user.role == 'admin' %}
        <th>Part Number</th>
        {% endif %}
        <th>Status</th>
        {% if user.role == 'admin' or user.role == "manager" %}
        <th>Actions</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>GHC {{ item.price }}</td>
        {% if user.role == 'admin' %}
        <td>{{ item.part_number }}</td>
        {% endif %}
        <td>
          {% if item.is_low_stock %}
          <span class="badge bg-danger"
            ><i class="bi bi-exclamation-triangle-fill"></i> Low</span
          >
          {% else %}
          <span class="badge bg-success"
            ><i class="bi bi-check-circle-fill"></i> OK</span
          >
          {% endif %}
        </td>
        {% if user.role == 'admin' or user.role == "manager" %}
        <td>
          <a
            href="{% url 'update_item' item.id %}"
            class="btn btn-sm btn-outline-primary"
          >
            <i class="bi bi-pencil-square"></i> Edit
          </a>
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
